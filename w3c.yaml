description: "Installs WebView2 + Battle.net + W3Champions. Note: Proton-GE-9-26 is recommended. You need to run Battle.net to install and then run Warcraft III at least once before W3Champions will work."
game_slug: W3Champions
installer_slug: W3Champions
name: "W3Champions"
runner: wine
script:
  files:
    - battlenet:
        filename: Battle.net-Setup.exe
        url: https://www.battle.net/download/getInstallerForGame?os=win&version=LIVE&gameProgram=BATTLENET_APP
    - w3champions:
        filename: W3Champions_latest_x64_en-US.msi
        url: https://update-service.w3champions.com/api/launcher-e
    - webview2:
        filename: MicrosoftEdgeWebview2RuntimeInstallerX64.exe
        url: https://go.microsoft.com/fwlink/?linkid=2124701
  game:
    arch: win64
    exe: drive_c/Program Files/W3Champions/W3Champions.exe
    prefix: $GAMEDIR
  installer:
    - task:
        arch: win64
        description: "Creating 64bit Wine prefix."
        name: create_prefix
        prefix: $GAMEDIR
    - task:
        arch: win64
        description: "Installing WebView2..."
        prefix: $GAMEDIR
        executable: webview2
        name: wineexec
        exclude_processes: MicrosoftEdgeUpdate.exe MicrosoftEdgeUp
    - task:
        arch: win64
        description: "Setting msedgewebview2.exe to Windows 7 so WebView2 apps render instead of black screen"
        key: Version
        name: set_regedit
        path: HKEY_CURRENT_USER\Software\Wine\AppDefaults\msedgewebview2.exe
        prefix: $GAMEDIR
        value: win7
    - task:
        arch: win64
        executable: battlenet
        name: wineexec
        description: "Installing Battle.net..."
        prefix: $GAMEDIR
    - task:
        arch: win64
        description: "Installing W3Champions..."
        executable: w3champions
        prefix: $GAMEDIR
        name: wineexec
  system:
    env:
      PROTON_VERB: run
    exclude_processes: Agent.exe "Battle.net Helper.exe" MicrosoftEdgeUpdate.exe MicrosoftEdgeUp
slug: W3Champions
steamid: null
version: Battle.net + W3Champions + WebView2
year: 2020
